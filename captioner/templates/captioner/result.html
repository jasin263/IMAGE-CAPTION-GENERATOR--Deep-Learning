{% extends 'captioner/base.html' %}

{% block title %}Caption Result{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card fade-in-up">
            <div class="card-header">
                <h3 class="card-title"><i class="fas fa-check-circle text-success me-2"></i>Caption Generated Successfully!</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="text-center mb-3">
                            <h5><i class="fas fa-image me-2"></i>Your Image</h5>
                        </div>
                        {% if image_url %}
                            <img src="{{ image_url }}" alt="Uploaded Image" class="img-fluid rounded shadow">
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        <div class="text-center mb-3">
                            <h5><i class="fas fa-comment-dots me-2"></i>Generated Caption</h5>
                        </div>
                        <div class="alert alert-info border-0 shadow-sm" style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                            <i class="fas fa-quote-left text-primary me-2"></i>
                            <span class="fw-bold fs-5">{{ caption }}</span>
                            <i class="fas fa-quote-right text-primary ms-2"></i>
                        </div>
                        {% if model_type %}
                            <div class="mt-3">
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Generated using: {{ model_type|title }} Model
                                </small>
                            </div>
                        {% endif %}
                        <div class="text-center mt-4">
                            <a href="{% url 'upload' %}" class="btn btn-success btn-lg me-3">
                                <i class="fas fa-plus-circle me-2"></i>Upload Another Image
                            </a>
                            <button onclick="copyCaption()" class="btn btn-outline-primary btn-lg" id="copy-btn">
                                <i class="fas fa-copy me-2"></i>Copy Caption
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyCaption() {
    const caption = "{{ caption }}";
    navigator.clipboard.writeText(caption).then(function() {
        const copyBtn = document.getElementById('copy-btn');
        const originalHTML = copyBtn.innerHTML;
        copyBtn.innerHTML = '<i class="fas fa-check me-2"></i>Copied!';
        copyBtn.classList.remove('btn-outline-primary');
        copyBtn.classList.add('btn-success');

        setTimeout(function() {
            copyBtn.innerHTML = originalHTML;
            copyBtn.classList.remove('btn-success');
            copyBtn.classList.add('btn-outline-primary');
        }, 2000);
    });
}

// Add some animation when page loads
document.addEventListener('DOMContentLoaded', function() {
    const image = document.querySelector('.img-fluid');
    const caption = document.querySelector('.alert');

    setTimeout(() => {
        if (image) image.style.animation = 'bounceIn 0.8s ease-out';
    }, 200);

    setTimeout(() => {
        if (caption) caption.style.animation = 'slideInRight 0.8s ease-out';
    }, 400);
});
</script>

<style>
@keyframes bounceIn {
    0% {
        transform: scale(0.3);
        opacity: 0;
    }
    50% {
        transform: scale(1.05);
    }
    70% {
        transform: scale(0.9);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}
</style>
{% endblock %}
